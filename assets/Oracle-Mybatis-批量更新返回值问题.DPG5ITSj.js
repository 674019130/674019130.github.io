import{_ as y}from"./ValaxyMain.vue_vue_type_style_index_0_lang.DfSvu0AI.js";import{f as A,a as o,u as g}from"./chunks/vue-router._WMYa8cX.js";import{s as c,bH as t,aW as l,v as i,H as s,bi as E,aK as u,aM as B}from"./framework.DDojlQDl.js";import"./app.i6-hyFKY.js";import"./chunks/dayjs.DPscOGnl.js";import"./chunks/vue-i18n.D5iU1Uln.js";import"./chunks/pinia.DkkyVvQY.js";import"./chunks/@vueuse/motion.B7tSKkoB.js";import"./chunks/nprogress.DgNGesC2.js";import"./YunComment.vue_vue_type_style_index_0_lang.lVt8y9cy.js";import"./index.C5okkQwF.js";import"./YunPageHeader.vue_vue_type_script_setup_true_lang.CUTuRIHR.js";import"./post.D5cvIXgt.js";const m=A("/posts/Oracle-Mybatis-批量更新返回值问题",async e=>JSON.parse('{"title":"Oracle-Mybatis-批量更新返回值问题","description":"","frontmatter":{"title":"Oracle-Mybatis-批量更新返回值问题","tags":["Oracle","Mybatis","Java","JDBC"],"categories":["技术笔记","数据库"],"author":"苏","readmore":true,"excerpt":"Mybatis 在使用（批量）更新语句的时候，应该在 SQL 语句正常执行完毕后返回「受影响行数」，但在连接的数据库是 Oracle 的时候却一直返回 -1，无法对 SQL 的执行状态进行判断，为了解决这个问题，我做了一些尝试……"},"headers":[],"relativePath":"pages/posts/Oracle-Mybatis-批量更新返回值问题.md","lastUpdated":1747386466000}'),{lazy:(e,k)=>e.name===k.name}),R={__name:"Oracle-Mybatis-批量更新返回值问题",setup(e,{expose:k}){var r;const{data:n}=m(),p=g(),F=o(),h=Object.assign(F.meta.frontmatter||{},((r=n.value)==null?void 0:r.frontmatter)||{});return F.meta.frontmatter=h,p.currentRoute.value.data=n.value,B("valaxy:frontmatter",h),globalThis.$frontmatter=h,k({frontmatter:{title:"Oracle-Mybatis-批量更新返回值问题",tags:["Oracle","Mybatis","Java","JDBC"],categories:["技术笔记","数据库"],author:"苏",readmore:!0,excerpt:"Mybatis 在使用（批量）更新语句的时候，应该在 SQL 语句正常执行完毕后返回「受影响行数」，但在连接的数据库是 Oracle 的时候却一直返回 -1，无法对 SQL 的执行状态进行判断，为了解决这个问题，我做了一些尝试……"}}),(a,D)=>{const d=y;return u(),c(d,{frontmatter:E(h)},{"main-content-md":t(()=>D[0]||(D[0]=[i("h1",{id:"场景",tabindex:"-1"},[s("场景 "),i("a",{class:"header-anchor",href:"#场景","aria-label":'Permalink to "场景"'},"​")],-1),i("p",null,"ORM：Mybatis",-1),i("p",null,"数据库：Oracle",-1),i("p",null,"组里新人写的一个接口。",-1),i("p",null,"传给 Mapper 层的是两个元素数量相等的 List，根据某两个字段是否与 List 中的元素匹配，对 status 字段做更新。",-1),i("h1",{id:"问题",tabindex:"-1"},[s("问题 "),i("a",{class:"header-anchor",href:"#问题","aria-label":'Permalink to "问题"'},"​")],-1),i("p",null,"假如传入 3 条数据，对应数据库中，应该更新三行的 status，如果能够做到全部更新成功，则继续后续业务的执行。但是无论受影响行数是 0 或其他任何非负整数，方法的返回值都是 -1。无法获取受影响行数。",-1),i("h1",{id:"解决方案",tabindex:"-1"},[s("解决方案 "),i("a",{class:"header-anchor",href:"#解决方案","aria-label":'Permalink to "解决方案"'},"​")],-1),i("p",null,[s("这个项目用的是 xml 文件写 mapper，为了实现批量查询，需要在 "),i("code",null,"foreach"),s(" 标签里添加一些东西。")],-1),i("p",null,[i("code",null,' <foreach collection="list" item="item" index="index" open="begin" close=";end;" separator=";">')],-1),i("p",null,"解决了批量更新的问题，返回值还是 -1，开始查网上的资料。无奈 Mybatis & Oracle 的相关资料非常少，包括外网也是。",-1),i("p",null,[s("当数据库是 MySQL 的时候，可以通过修改 JDBC 的 URL 参数，添加"),i("code",null,'"affectedRows=true"'),s("来实现返回受影响行数的功能（我自己在 MySQL 数据库开发的时候并没有遇到需要额外配置这个参数的情况）。于是我去搜了 Oracle JDBC 的官方文档，官方给出的 URL 参数里并没有效果类似"),i("code",null,'"affectedRows"'),s("的，这条路走不通。")],-1),i("p",null,"JDBC 连接上走不通，看看能不能从 Mybatis 入手。继续搜别的资料。",-1),i("p",null,"搜到有解释说，返回值是 -1 是由于：",-1),i("blockquote",null,[i("p",null,"是由于defaultExecutorType的引起的，defaultExecutorType有三个执行器SIMPLE、REUSE和BATCH。其中BATCH可以批量更新操作缓存SQL以提高性能，但是有个缺陷就是无法获取update、delete返回的行数。defaultExecutorType的默认执行器是SIMPLE。"),i("table",null,[i("thead",null,[i("tr",null,[i("th",null,"名称"),i("th",null,"描述")])]),i("tbody",null,[i("tr",null,[i("td",null,"SIMPLE"),i("td",null,"执行器执行其它语句")]),i("tr",null,[i("td",null,"REUSE"),i("td",null,"可能重复使用prepared statements 语句")]),i("tr",null,[i("td",null,"BATCH"),i("td",null,"可以重复执行语句和批量更新")])])]),i("p",null,"由于项目配置中启用了BATCH执行器，UPDATE和DELETE返回的行数就丢失了，把执行器改为SIMPLE即可。")],-1),i("p",null,"但是该项目的 Mybatis 配置是这样的：",-1),i("div",{class:"language-yaml vp-adaptive-theme"},[i("button",{title:"Copy Code",class:"copy"}),i("span",{class:"lang"},"yaml"),i("pre",{class:"shiki shiki-themes material-theme-lighter material-theme-darker vp-code"},[i("code",{"v-pre":""},[i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#E53935","--shiki-dark":"#F07178"}},"mybatis"),i("span",{style:{"--shiki-light":"#39ADB5","--shiki-dark":"#89DDFF"}},":")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#E53935","--shiki-dark":"#F07178"}},"    configuration"),i("span",{style:{"--shiki-light":"#39ADB5","--shiki-dark":"#89DDFF"}},":")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#E53935","--shiki-dark":"#F07178"}},"        default-executor-type"),i("span",{style:{"--shiki-light":"#39ADB5","--shiki-dark":"#89DDFF"}},":"),i("span",{style:{"--shiki-light":"#91B859","--shiki-dark":"#C3E88D"}}," simple")])])]),i("button",{class:"collapse"})],-1),i("p",null,"所以这条路也走不通，继续找原因。",-1),i("p",null,"在 StackOverflow 找到有个人说用 BEGIN + END + ; 实现的并不是 「a batch operation」，这里引出了 statement batch 的类型。",-1),i("blockquote",null,[i("figure",null,[i("img",{src:"https://tva3.sinaimg.cn/large/008kWByAly8h7swp3ep1wj30j80lp76t.jpg",alt:"image-20221104103007804",loading:"lazy",decoding:"async"})])],-1),i("p",null,[s("但是实际测试的时候发现"),i("code",null,"getUpdateCounts()"),s("返回的数组还是都是 -2。")],-1),i("p",null,[s("无奈已经下班一个小时了，只好先用 "),i("code",null,"in"),s("代替了"),i("code",null,"where"),s("条件中的"),i("code",null,"="),s("，抛弃了批量更新，修改为了一条 SQL 语句。这样可以正常获取返回值。")],-1),i("p",null,"第二天早上来了就在查还有没有相关的资料。查到一个人读了更多的 Oracle JDBC 的文档，解决了我的问题。",-1),i("blockquote",null,[i("p",null,"后来，在 Oracle 的文档说明中，发现的原因："),i("p",null,[i("a",{href:"https://docs.oracle.com/cd/E11882_01/java.112/e16548/oraperf.htm#JJDBC28777",target:"_blank",rel:"noreferrer"},"https://docs.oracle.com/cd/E11882_01/java.112/e16548/oraperf.htm#JJDBC28777")]),i("p",null,"其中，有一段说明："),i("p",null,"Update Counts in the Oracle Implementation of Standard Batching"),i("p",null,[s("If a statement batch is processed successfully, then the integer array, or update counts array, returned by the statement "),i("code",null,"executeBatch"),s(" call will always have one element for each operation in the batch. In the Oracle implementation of standard update batching, the values of the array elements are as follows:")]),i("ul",null,[i("li",null,[s("For a prepared statement batch, it is not possible to know the number of rows affected in the database by each individual statement in the batch. Therefore, all array elements have a value of "),i("code",null,"-2"),s(". According to the JDBC 2.0 specification, a value of "),i("code",null,"-2"),s(" indicates that the operation was successful but the number of rows affected is unknown.")]),i("li",null,"For a generic statement batch, the array contains the actual update counts indicating the number of rows affected by each operation. The actual update counts can be provided only in the case of generic statements in the Oracle implementation of standard batching."),i("li",null,[s("For a callable statement batch, the server always returns the value "),i("code",null,"1"),s(" as the update count, irrespective of the number rows affected by each operation.")])]),i("p",null,[s("In your code, upon successful processing of a batch, you should be prepared to handle either "),i("code",null,"-2"),s(", "),i("code",null,"1"),s(", or true update counts in the array elements. For a successful batch processing, the array contains either all "),i("code",null,"-2"),s(", 1, or all positive integers.")])],-1),i("p",null,"针对三种不同的「statement batch」，Oracle 给出的返回值是不同的，也代表了不同的意义，文档里说的很明白。",-1),i("ul",null,[i("li",null,[i("p",null,"parpared statement：-2 表示执行成功，但无法返回实际成功行数；")]),i("li",null,[i("p",null,"generic statement：返回实际成功行数；")]),i("li",null,[i("p",null,"callable statement：永远返回 1；")])],-1),i("p",null,"最终的解决方案，抛弃 Mybatis：",-1),i("div",{class:"language-java vp-adaptive-theme"},[i("button",{title:"Copy Code",class:"copy"}),i("span",{class:"lang"},"java"),i("pre",{class:"shiki shiki-themes material-theme-lighter material-theme-darker vp-code"},[i("code",{"v-pre":""},[i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#9C3EDA","--shiki-dark":"#C792EA"}},"private"),i("span",{style:{"--shiki-light":"#9C3EDA","--shiki-dark":"#C792EA"}}," int"),i("span",{style:{"--shiki-light":"#6182B8","--shiki-dark":"#82AAFF"}}," updateList"),i("span",{style:{"--shiki-light":"#39ADB5","--shiki-dark":"#89DDFF"}},"("),i("span",{style:{"--shiki-light":"#9C3EDA","--shiki-dark":"#C792EA"}},"List"),i("span",{style:{"--shiki-light":"#39ADB5","--shiki-dark":"#89DDFF"}}," <"),i("span",{style:{"--shiki-light":"#90A4AE","--shiki-dark":"#EEFFFF"}}," MyObject "),i("span",{style:{"--shiki-light":"#39ADB5","--shiki-dark":"#89DDFF"}},">"),i("span",{style:{"--shiki-light":"#90A4AE","--shiki-dark":"#EEFFFF"}}," myList"),i("span",{style:{"--shiki-light":"#39ADB5","--shiki-dark":"#89DDFF"}},")"),i("span",{style:{"--shiki-light":"#39ADB5","--shiki-dark":"#89DDFF"}}," {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#9C3EDA","--shiki-dark":"#C792EA"}},"    int"),i("span",{style:{"--shiki-light":"#90A4AE","--shiki-dark":"#EEFFFF"}}," size "),i("span",{style:{"--shiki-light":"#39ADB5","--shiki-dark":"#89DDFF"}},"="),i("span",{style:{"--shiki-light":"#90A4AE","--shiki-dark":"#EEFFFF"}}," myList"),i("span",{style:{"--shiki-light":"#39ADB5","--shiki-dark":"#89DDFF"}},"."),i("span",{style:{"--shiki-light":"#6182B8","--shiki-dark":"#82AAFF"}},"size"),i("span",{style:{"--shiki-light":"#39ADB5","--shiki-dark":"#89DDFF"}},"();")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#9C3EDA","--shiki-dark":"#C792EA"}},"    int"),i("span",{style:{"--shiki-light":"#90A4AE","--shiki-dark":"#EEFFFF"}}," batchSize "),i("span",{style:{"--shiki-light":"#39ADB5","--shiki-dark":"#89DDFF"}},"="),i("span",{style:{"--shiki-light":"#F76D47","--shiki-dark":"#F78C6C"}}," 100"),i("span",{style:{"--shiki-light":"#39ADB5","--shiki-dark":"#89DDFF"}},";")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#9C3EDA","--shiki-dark":"#C792EA"}},"    int"),i("span",{style:{"--shiki-light":"#90A4AE","--shiki-dark":"#EEFFFF"}}," index "),i("span",{style:{"--shiki-light":"#39ADB5","--shiki-dark":"#89DDFF"}},"="),i("span",{style:{"--shiki-light":"#F76D47","--shiki-dark":"#F78C6C"}}," 0"),i("span",{style:{"--shiki-light":"#39ADB5","--shiki-dark":"#89DDFF"}},";")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#9C3EDA","--shiki-dark":"#C792EA"}},"    Long"),i("span",{style:{"--shiki-light":"#90A4AE","--shiki-dark":"#EEFFFF"}}," affectedRows "),i("span",{style:{"--shiki-light":"#39ADB5","--shiki-dark":"#89DDFF"}},"="),i("span",{style:{"--shiki-light":"#F76D47","--shiki-dark":"#F78C6C"}}," 0"),i("span",{style:{"--shiki-light":"#90A4AE","--shiki-dark":"#EEFFFF"}}," L"),i("span",{style:{"--shiki-light":"#39ADB5","--shiki-dark":"#89DDFF"}},";")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#9C3EDA","--shiki-dark":"#C792EA"}},"    SqlSession"),i("span",{style:{"--shiki-light":"#90A4AE","--shiki-dark":"#EEFFFF"}}," sqlSession "),i("span",{style:{"--shiki-light":"#39ADB5","--shiki-dark":"#89DDFF"}},"="),i("span",{style:{"--shiki-light":"#90A4AE","--shiki-dark":"#EEFFFF"}}," sqlSessionFactory"),i("span",{style:{"--shiki-light":"#39ADB5","--shiki-dark":"#89DDFF"}},"."),i("span",{style:{"--shiki-light":"#6182B8","--shiki-dark":"#82AAFF"}},"openSession"),i("span",{style:{"--shiki-light":"#39ADB5","--shiki-dark":"#89DDFF"}},"("),i("span",{style:{"--shiki-light":"#90A4AE","--shiki-dark":"#EEFFFF"}},"ExecutorType"),i("span",{style:{"--shiki-light":"#39ADB5","--shiki-dark":"#89DDFF"}},"."),i("span",{style:{"--shiki-light":"#90A4AE","--shiki-dark":"#EEFFFF"}},"BATCH"),i("span",{style:{"--shiki-light":"#39ADB5","--shiki-dark":"#89DDFF"}},");")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#9C3EDA","--shiki-dark":"#C792EA"}},"    Connection"),i("span",{style:{"--shiki-light":"#90A4AE","--shiki-dark":"#EEFFFF"}}," conn "),i("span",{style:{"--shiki-light":"#39ADB5","--shiki-dark":"#89DDFF"}},"="),i("span",{style:{"--shiki-light":"#90A4AE","--shiki-dark":"#EEFFFF"}}," sqlSession"),i("span",{style:{"--shiki-light":"#39ADB5","--shiki-dark":"#89DDFF"}},"."),i("span",{style:{"--shiki-light":"#6182B8","--shiki-dark":"#82AAFF"}},"getConnection"),i("span",{style:{"--shiki-light":"#39ADB5","--shiki-dark":"#89DDFF"}},"();")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#9C3EDA","--shiki-dark":"#C792EA"}},"    Statement"),i("span",{style:{"--shiki-light":"#90A4AE","--shiki-dark":"#EEFFFF"}}," statement "),i("span",{style:{"--shiki-light":"#39ADB5","--shiki-dark":"#89DDFF"}},"="),i("span",{style:{"--shiki-light":"#39ADB5","--shiki-dark":"#89DDFF"}}," null;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#39ADB5","--shiki-light-font-style":"italic","--shiki-dark":"#89DDFF","--shiki-dark-font-style":"italic"}},"    try"),i("span",{style:{"--shiki-light":"#39ADB5","--shiki-dark":"#89DDFF"}}," {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#90A4AE","--shiki-dark":"#EEFFFF"}},"        statement "),i("span",{style:{"--shiki-light":"#39ADB5","--shiki-dark":"#89DDFF"}},"="),i("span",{style:{"--shiki-light":"#90A4AE","--shiki-dark":"#EEFFFF"}}," conn"),i("span",{style:{"--shiki-light":"#39ADB5","--shiki-dark":"#89DDFF"}},"."),i("span",{style:{"--shiki-light":"#6182B8","--shiki-dark":"#82AAFF"}},"createStatement"),i("span",{style:{"--shiki-light":"#39ADB5","--shiki-dark":"#89DDFF"}},"();")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#90A4AE","--shiki-dark":"#EEFFFF"}},"        conn"),i("span",{style:{"--shiki-light":"#39ADB5","--shiki-dark":"#89DDFF"}},"."),i("span",{style:{"--shiki-light":"#6182B8","--shiki-dark":"#82AAFF"}},"setAutoCommit"),i("span",{style:{"--shiki-light":"#39ADB5","--shiki-dark":"#89DDFF"}},"(false);")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#39ADB5","--shiki-light-font-style":"italic","--shiki-dark":"#89DDFF","--shiki-dark-font-style":"italic"}},"        for"),i("span",{style:{"--shiki-light":"#39ADB5","--shiki-dark":"#89DDFF"}}," ("),i("span",{style:{"--shiki-light":"#9C3EDA","--shiki-dark":"#C792EA"}},"MyObject"),i("span",{style:{"--shiki-light":"#90A4AE","--shiki-dark":"#EEFFFF"}}," obj"),i("span",{style:{"--shiki-light":"#39ADB5","--shiki-light-font-style":"italic","--shiki-dark":"#89DDFF","--shiki-dark-font-style":"italic"}},":"),i("span",{style:{"--shiki-light":"#90A4AE","--shiki-dark":"#EEFFFF"}}," myList"),i("span",{style:{"--shiki-light":"#39ADB5","--shiki-dark":"#89DDFF"}},")"),i("span",{style:{"--shiki-light":"#39ADB5","--shiki-dark":"#89DDFF"}}," {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#90A4AE","--shiki-dark":"#EEFFFF"}},"            index"),i("span",{style:{"--shiki-light":"#39ADB5","--shiki-dark":"#89DDFF"}},"++;")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#9C3EDA","--shiki-dark":"#C792EA"}},"            String"),i("span",{style:{"--shiki-light":"#90A4AE","--shiki-dark":"#EEFFFF"}}," sql "),i("span",{style:{"--shiki-light":"#39ADB5","--shiki-dark":"#89DDFF"}},"="),i("span",{style:{"--shiki-light":"#39ADB5","--shiki-dark":"#89DDFF"}},' "'),i("span",{style:{"--shiki-light":"#91B859","--shiki-dark":"#C3E88D"}},"update tb_test set status = "),i("span",{style:{"--shiki-light":"#39ADB5","--shiki-dark":"#89DDFF"}},'"'),i("span",{style:{"--shiki-light":"#39ADB5","--shiki-dark":"#89DDFF"}}," +"),i("span",{style:{"--shiki-light":"#90A4AE","--shiki-dark":"#EEFFFF"}}," obj"),i("span",{style:{"--shiki-light":"#39ADB5","--shiki-dark":"#89DDFF"}},"."),i("span",{style:{"--shiki-light":"#90A4AE","--shiki-dark":"#EEFFFF"}},"getStatus "),i("span",{style:{"--shiki-light":"#39ADB5","--shiki-dark":"#89DDFF"}},"+"),i("span",{style:{"--shiki-light":"#39ADB5","--shiki-dark":"#89DDFF"}},' "'),i("span",{style:{"--shiki-light":"#91B859","--shiki-dark":"#C3E88D"}}," where id = "),i("span",{style:{"--shiki-light":"#39ADB5","--shiki-dark":"#89DDFF"}},'"'),i("span",{style:{"--shiki-light":"#39ADB5","--shiki-dark":"#89DDFF"}}," +"),i("span",{style:{"--shiki-light":"#90A4AE","--shiki-dark":"#EEFFFF"}}," obj"),i("span",{style:{"--shiki-light":"#39ADB5","--shiki-dark":"#89DDFF"}},"."),i("span",{style:{"--shiki-light":"#6182B8","--shiki-dark":"#82AAFF"}},"getId"),i("span",{style:{"--shiki-light":"#39ADB5","--shiki-dark":"#89DDFF"}},"();")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#90A4AE","--shiki-dark":"#EEFFFF"}},"            statement"),i("span",{style:{"--shiki-light":"#39ADB5","--shiki-dark":"#89DDFF"}},"."),i("span",{style:{"--shiki-light":"#6182B8","--shiki-dark":"#82AAFF"}},"addBatch"),i("span",{style:{"--shiki-light":"#39ADB5","--shiki-dark":"#89DDFF"}},"("),i("span",{style:{"--shiki-light":"#90A4AE","--shiki-dark":"#EEFFFF"}},"sql"),i("span",{style:{"--shiki-light":"#39ADB5","--shiki-dark":"#89DDFF"}},");")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#39ADB5","--shiki-light-font-style":"italic","--shiki-dark":"#89DDFF","--shiki-dark-font-style":"italic"}},"            if"),i("span",{style:{"--shiki-light":"#39ADB5","--shiki-dark":"#89DDFF"}}," ("),i("span",{style:{"--shiki-light":"#90A4AE","--shiki-dark":"#EEFFFF"}},"index "),i("span",{style:{"--shiki-light":"#39ADB5","--shiki-dark":"#89DDFF"}},"%"),i("span",{style:{"--shiki-light":"#90A4AE","--shiki-dark":"#EEFFFF"}}," batchSize "),i("span",{style:{"--shiki-light":"#39ADB5","--shiki-dark":"#89DDFF"}},"=="),i("span",{style:{"--shiki-light":"#F76D47","--shiki-dark":"#F78C6C"}}," 0"),i("span",{style:{"--shiki-light":"#39ADB5","--shiki-dark":"#89DDFF"}}," ||"),i("span",{style:{"--shiki-light":"#90A4AE","--shiki-dark":"#EEFFFF"}}," index "),i("span",{style:{"--shiki-light":"#39ADB5","--shiki-dark":"#89DDFF"}},"=="),i("span",{style:{"--shiki-light":"#90A4AE","--shiki-dark":"#EEFFFF"}}," size"),i("span",{style:{"--shiki-light":"#39ADB5","--shiki-dark":"#89DDFF"}},")"),i("span",{style:{"--shiki-light":"#39ADB5","--shiki-dark":"#89DDFF"}}," {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#9C3EDA","--shiki-dark":"#C792EA"}},"                int"),i("span",{style:{"--shiki-light":"#39ADB5","--shiki-dark":"#89DDFF"}},"[]"),i("span",{style:{"--shiki-light":"#90A4AE","--shiki-dark":"#EEFFFF"}}," ints "),i("span",{style:{"--shiki-light":"#39ADB5","--shiki-dark":"#89DDFF"}},"="),i("span",{style:{"--shiki-light":"#90A4AE","--shiki-dark":"#EEFFFF"}}," statement"),i("span",{style:{"--shiki-light":"#39ADB5","--shiki-dark":"#89DDFF"}},"."),i("span",{style:{"--shiki-light":"#6182B8","--shiki-dark":"#82AAFF"}},"executeBatch"),i("span",{style:{"--shiki-light":"#39ADB5","--shiki-dark":"#89DDFF"}},"();")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#90A4AE","--shiki-dark":"#EEFFFF"}},"                affectedRows "),i("span",{style:{"--shiki-light":"#39ADB5","--shiki-dark":"#89DDFF"}},"+="),i("span",{style:{"--shiki-light":"#90A4AE","--shiki-dark":"#EEFFFF"}}," IntStream"),i("span",{style:{"--shiki-light":"#39ADB5","--shiki-dark":"#89DDFF"}},"."),i("span",{style:{"--shiki-light":"#6182B8","--shiki-dark":"#82AAFF"}},"of"),i("span",{style:{"--shiki-light":"#39ADB5","--shiki-dark":"#89DDFF"}},"("),i("span",{style:{"--shiki-light":"#90A4AE","--shiki-dark":"#EEFFFF"}},"ints"),i("span",{style:{"--shiki-light":"#39ADB5","--shiki-dark":"#89DDFF"}},")."),i("span",{style:{"--shiki-light":"#6182B8","--shiki-dark":"#82AAFF"}},"sum"),i("span",{style:{"--shiki-light":"#39ADB5","--shiki-dark":"#89DDFF"}},"();")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#90A4AE","--shiki-dark":"#EEFFFF"}},"                statement"),i("span",{style:{"--shiki-light":"#39ADB5","--shiki-dark":"#89DDFF"}},"."),i("span",{style:{"--shiki-light":"#6182B8","--shiki-dark":"#82AAFF"}},"clearBatch"),i("span",{style:{"--shiki-light":"#39ADB5","--shiki-dark":"#89DDFF"}},"();")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#39ADB5","--shiki-dark":"#89DDFF"}},"            }")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#39ADB5","--shiki-dark":"#89DDFF"}},"        }")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#90A4AE","--shiki-dark":"#EEFFFF"}},"        conn"),i("span",{style:{"--shiki-light":"#39ADB5","--shiki-dark":"#89DDFF"}},"."),i("span",{style:{"--shiki-light":"#6182B8","--shiki-dark":"#82AAFF"}},"commit"),i("span",{style:{"--shiki-light":"#39ADB5","--shiki-dark":"#89DDFF"}},"();")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#90A4AE","--shiki-dark":"#EEFFFF"}},"        conn"),i("span",{style:{"--shiki-light":"#39ADB5","--shiki-dark":"#89DDFF"}},"."),i("span",{style:{"--shiki-light":"#6182B8","--shiki-dark":"#82AAFF"}},"setAutoCommit"),i("span",{style:{"--shiki-light":"#39ADB5","--shiki-dark":"#89DDFF"}},"(true);")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#39ADB5","--shiki-dark":"#89DDFF"}},"    }"),i("span",{style:{"--shiki-light":"#39ADB5","--shiki-light-font-style":"italic","--shiki-dark":"#89DDFF","--shiki-dark-font-style":"italic"}}," catch"),i("span",{style:{"--shiki-light":"#39ADB5","--shiki-dark":"#89DDFF"}}," ("),i("span",{style:{"--shiki-light":"#9C3EDA","--shiki-dark":"#C792EA"}},"SQLException"),i("span",{style:{"--shiki-light":"#90A4AE","--shiki-light-font-style":"italic","--shiki-dark":"#EEFFFF","--shiki-dark-font-style":"italic"}}," throwables"),i("span",{style:{"--shiki-light":"#39ADB5","--shiki-dark":"#89DDFF"}},")"),i("span",{style:{"--shiki-light":"#39ADB5","--shiki-dark":"#89DDFF"}}," {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#90A4AE","--shiki-dark":"#EEFFFF"}},"        throwables"),i("span",{style:{"--shiki-light":"#39ADB5","--shiki-dark":"#89DDFF"}},"."),i("span",{style:{"--shiki-light":"#6182B8","--shiki-dark":"#82AAFF"}},"printStackTrace"),i("span",{style:{"--shiki-light":"#39ADB5","--shiki-dark":"#89DDFF"}},"();")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#39ADB5","--shiki-dark":"#89DDFF"}},"    }"),i("span",{style:{"--shiki-light":"#39ADB5","--shiki-light-font-style":"italic","--shiki-dark":"#89DDFF","--shiki-dark-font-style":"italic"}}," finally"),i("span",{style:{"--shiki-light":"#39ADB5","--shiki-dark":"#89DDFF"}}," {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#39ADB5","--shiki-light-font-style":"italic","--shiki-dark":"#89DDFF","--shiki-dark-font-style":"italic"}},"        try"),i("span",{style:{"--shiki-light":"#39ADB5","--shiki-dark":"#89DDFF"}}," {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#39ADB5","--shiki-light-font-style":"italic","--shiki-dark":"#89DDFF","--shiki-dark-font-style":"italic"}},"            if"),i("span",{style:{"--shiki-light":"#39ADB5","--shiki-dark":"#89DDFF"}}," ("),i("span",{style:{"--shiki-light":"#90A4AE","--shiki-dark":"#EEFFFF"}},"statement "),i("span",{style:{"--shiki-light":"#39ADB5","--shiki-dark":"#89DDFF"}},"!="),i("span",{style:{"--shiki-light":"#39ADB5","--shiki-dark":"#89DDFF"}}," null"),i("span",{style:{"--shiki-light":"#39ADB5","--shiki-dark":"#89DDFF"}}," &&"),i("span",{style:{"--shiki-light":"#39ADB5","--shiki-dark":"#89DDFF"}}," !"),i("span",{style:{"--shiki-light":"#90A4AE","--shiki-dark":"#EEFFFF"}},"statement"),i("span",{style:{"--shiki-light":"#39ADB5","--shiki-dark":"#89DDFF"}},"."),i("span",{style:{"--shiki-light":"#6182B8","--shiki-dark":"#82AAFF"}},"isClosed"),i("span",{style:{"--shiki-light":"#39ADB5","--shiki-dark":"#89DDFF"}},"())"),i("span",{style:{"--shiki-light":"#39ADB5","--shiki-dark":"#89DDFF"}}," {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#90A4AE","--shiki-dark":"#EEFFFF"}},"                statement"),i("span",{style:{"--shiki-light":"#39ADB5","--shiki-dark":"#89DDFF"}},"."),i("span",{style:{"--shiki-light":"#6182B8","--shiki-dark":"#82AAFF"}},"close"),i("span",{style:{"--shiki-light":"#39ADB5","--shiki-dark":"#89DDFF"}},"();")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#39ADB5","--shiki-dark":"#89DDFF"}},"            }")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#39ADB5","--shiki-dark":"#89DDFF"}},"        }"),i("span",{style:{"--shiki-light":"#39ADB5","--shiki-light-font-style":"italic","--shiki-dark":"#89DDFF","--shiki-dark-font-style":"italic"}}," catch"),i("span",{style:{"--shiki-light":"#39ADB5","--shiki-dark":"#89DDFF"}}," ("),i("span",{style:{"--shiki-light":"#9C3EDA","--shiki-dark":"#C792EA"}},"SQLException"),i("span",{style:{"--shiki-light":"#90A4AE","--shiki-light-font-style":"italic","--shiki-dark":"#EEFFFF","--shiki-dark-font-style":"italic"}}," throwables"),i("span",{style:{"--shiki-light":"#39ADB5","--shiki-dark":"#89DDFF"}},")"),i("span",{style:{"--shiki-light":"#39ADB5","--shiki-dark":"#89DDFF"}}," {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#90A4AE","--shiki-dark":"#EEFFFF"}},"            throwables"),i("span",{style:{"--shiki-light":"#39ADB5","--shiki-dark":"#89DDFF"}},"."),i("span",{style:{"--shiki-light":"#6182B8","--shiki-dark":"#82AAFF"}},"printStackTrace"),i("span",{style:{"--shiki-light":"#39ADB5","--shiki-dark":"#89DDFF"}},"();")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#39ADB5","--shiki-dark":"#89DDFF"}},"        }")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#39ADB5","--shiki-light-font-style":"italic","--shiki-dark":"#89DDFF","--shiki-dark-font-style":"italic"}},"        try"),i("span",{style:{"--shiki-light":"#39ADB5","--shiki-dark":"#89DDFF"}}," {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#39ADB5","--shiki-light-font-style":"italic","--shiki-dark":"#89DDFF","--shiki-dark-font-style":"italic"}},"            if"),i("span",{style:{"--shiki-light":"#39ADB5","--shiki-dark":"#89DDFF"}}," ("),i("span",{style:{"--shiki-light":"#90A4AE","--shiki-dark":"#EEFFFF"}},"conn "),i("span",{style:{"--shiki-light":"#39ADB5","--shiki-dark":"#89DDFF"}},"!="),i("span",{style:{"--shiki-light":"#39ADB5","--shiki-dark":"#89DDFF"}}," null"),i("span",{style:{"--shiki-light":"#39ADB5","--shiki-dark":"#89DDFF"}}," &&"),i("span",{style:{"--shiki-light":"#39ADB5","--shiki-dark":"#89DDFF"}}," !"),i("span",{style:{"--shiki-light":"#90A4AE","--shiki-dark":"#EEFFFF"}},"conn"),i("span",{style:{"--shiki-light":"#39ADB5","--shiki-dark":"#89DDFF"}},"."),i("span",{style:{"--shiki-light":"#6182B8","--shiki-dark":"#82AAFF"}},"isClosed"),i("span",{style:{"--shiki-light":"#39ADB5","--shiki-dark":"#89DDFF"}},"())"),i("span",{style:{"--shiki-light":"#39ADB5","--shiki-dark":"#89DDFF"}}," {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#90A4AE","--shiki-dark":"#EEFFFF"}},"                conn"),i("span",{style:{"--shiki-light":"#39ADB5","--shiki-dark":"#89DDFF"}},"."),i("span",{style:{"--shiki-light":"#6182B8","--shiki-dark":"#82AAFF"}},"close"),i("span",{style:{"--shiki-light":"#39ADB5","--shiki-dark":"#89DDFF"}},"();")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#39ADB5","--shiki-dark":"#89DDFF"}},"            }")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#39ADB5","--shiki-dark":"#89DDFF"}},"        }"),i("span",{style:{"--shiki-light":"#39ADB5","--shiki-light-font-style":"italic","--shiki-dark":"#89DDFF","--shiki-dark-font-style":"italic"}}," catch"),i("span",{style:{"--shiki-light":"#39ADB5","--shiki-dark":"#89DDFF"}}," ("),i("span",{style:{"--shiki-light":"#9C3EDA","--shiki-dark":"#C792EA"}},"SQLException"),i("span",{style:{"--shiki-light":"#90A4AE","--shiki-light-font-style":"italic","--shiki-dark":"#EEFFFF","--shiki-dark-font-style":"italic"}}," throwables"),i("span",{style:{"--shiki-light":"#39ADB5","--shiki-dark":"#89DDFF"}},")"),i("span",{style:{"--shiki-light":"#39ADB5","--shiki-dark":"#89DDFF"}}," {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#90A4AE","--shiki-dark":"#EEFFFF"}},"            throwables"),i("span",{style:{"--shiki-light":"#39ADB5","--shiki-dark":"#89DDFF"}},"."),i("span",{style:{"--shiki-light":"#6182B8","--shiki-dark":"#82AAFF"}},"printStackTrace"),i("span",{style:{"--shiki-light":"#39ADB5","--shiki-dark":"#89DDFF"}},"();")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#39ADB5","--shiki-dark":"#89DDFF"}},"        }")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#39ADB5","--shiki-dark":"#89DDFF"}},"    }")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#39ADB5","--shiki-light-font-style":"italic","--shiki-dark":"#89DDFF","--shiki-dark-font-style":"italic"}},"    return"),i("span",{style:{"--shiki-light":"#90A4AE","--shiki-dark":"#EEFFFF"}}," affectedRows"),i("span",{style:{"--shiki-light":"#39ADB5","--shiki-dark":"#89DDFF"}},"."),i("span",{style:{"--shiki-light":"#6182B8","--shiki-dark":"#82AAFF"}},"intValue"),i("span",{style:{"--shiki-light":"#39ADB5","--shiki-dark":"#89DDFF"}},"();")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#39ADB5","--shiki-dark":"#89DDFF"}},"}")])])]),i("button",{class:"collapse"})],-1),i("h1",{id:"吐槽",tabindex:"-1"},[s("吐槽 "),i("a",{class:"header-anchor",href:"#吐槽","aria-label":'Permalink to "吐槽"'},"​")],-1),i("ul",null,[i("li",null,[i("p",null,"Oracle 给我一种很难用的感觉。")]),i("li",null,[i("p",null,"网络上（尤其是 CSDN & 博客园）的资料基本都是复制来复制去，毫无营养。")]),i("li",null,[i("p",null,"新人手里那个项目的代码质量一言难尽，主要是注释和魔法数问题。")]),i("li",null,[i("p",null,"三种 statement 的区分是什么，后面找机会再了解下。（懒狗一条🐶")])],-1)])),"main-header":t(()=>[l(a.$slots,"main-header")]),"main-header-after":t(()=>[l(a.$slots,"main-header-after")]),"main-nav":t(()=>[l(a.$slots,"main-nav")]),"main-content-before":t(()=>[l(a.$slots,"main-content-before")]),"main-content":t(()=>[l(a.$slots,"main-content")]),"main-content-after":t(()=>[l(a.$slots,"main-content-after")]),"main-nav-before":t(()=>[l(a.$slots,"main-nav-before")]),"main-nav-after":t(()=>[l(a.$slots,"main-nav-after")]),comment:t(()=>[l(a.$slots,"comment")]),footer:t(()=>[l(a.$slots,"footer")]),aside:t(()=>[l(a.$slots,"aside")]),"aside-custom":t(()=>[l(a.$slots,"aside-custom")]),default:t(()=>[l(a.$slots,"default")]),_:3},8,["frontmatter"])}}};export{R as default,m as usePageData};
